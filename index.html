<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Retrieve and Send Location</title>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Function to fetch and display the location
      function fetchLocation() {
        navigator.geolocation.getCurrentPosition(function(position) {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;

          document.getElementById('latitude').innerText = `Latitude: ${latitude}`;
          document.getElementById('longitude').innerText = `Longitude: ${longitude}`;

          sendToThingSpeak(latitude, longitude);
        }, function(error) {
          console.error("Error fetching location: ", error);
        });
      }

      // Function to send data to ThingSpeak
      function sendToThingSpeak(lat, long) {
        const apiKey = 'SPR4UAOJOZ8VYW7E';
        const url = `https://api.thingspeak.com/update?api_key=${apiKey}&field3=${lat}&field4=${long}`;

        fetch(url)
          .then(response => response.text())
          .then(data => {
            console.log("Data sent to ThingSpeak: ", data);
          })
          .catch(error => {
            console.error("Error sending data to ThingSpeak: ", error);
          });
      }

      fetchLocation();
    });
  </script>
</head>
<body>
  <h1>Your Location</h1>
  <p id="latitude">Loading...</p>
  <p id="longitude">Loading...</p>
</body>
</html>
